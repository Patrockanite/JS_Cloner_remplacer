<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset='utf-8'>
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <title>reproduire DOM avec objets littéraux</title>
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <style>
            #mon_TP3, .my_TP3{
                color:rgb(17, 238, 17);
                background-color: rgb(84, 87, 90);
            }
            .correction, #correction_TP3{
                background-color: lightcoral;
            }
        </style>
    </head>
    <body>
        <h1>Reproduire le DOM avec objets littéraux</h1>
        <section id = "explications">
            <p>Cet exercice est une version un peu plus complexe que le précédent.<br />
               le tableau <em>Liste_definitions </em>contiendra des objets littéraux et chacun de ces objets contiendra 2 propriétés : le noeud du &lt;dt&gt; et le noeud du &lt;dd&gt;. 
            </p>
        </section>
        <div id="divTP3">
            <h2>HTML qui doit être reproduit par du JavaScript :</h2>
            <p>Langages basés sur ECMAScript :</p>
            <dl><!--représente une liste de descriptions. On utilise ce type de liste pour implémenter un glossaire par exemple-->
                <dt>JavaScript</dt><!--Titre de la description-->
                <dd>JavaScript est un langage de programmation de scripts principalement utlisé dans les pages web interactives mais aussi côté serveur.</dd><!--description-->
                <dt>JScript</dt>
                <dd>JScript est le nom générique de plusieurs implémentations d'ECMAScript 3 créées par Microsoft.</dd>
                <dt>ActionScript</dt>
                <dd>ActionScript est le langage de programmation utilisé au sein d'applications clientes (Adobe Flash, Adobe Flex) et serveur (Flash media server, Jrun, Macromedia Generator).</dd>
                <dt>EX4</dt>
                <dd>ECMAScript for XML (EX4) est une extension XML au langage ECMAScript.</dd>
            </dl>

        </div>
        <h2 class="my_TP3">HTML généré par le code JavaScript :</h2>
        <script>
            /* Reproduction de la structure ci-dessus par du code JavaScript */
            /* définition du div TP3 */
            var TP3 = document.createElement('div') ;
            TP3.id="mon_TP3" ;

            /* Définition du paragraphe en groupant tout sur la même ligne */
            var para_TP3 = document.createElement('p').appendChild(document.createTextNode("Langages basés sur ECMAScript :"));
        
            
            /* Définition de l'objet littéral Liste_definitions */
            var Liste_definitions = {
                JavaScript : "JavaScript est un langage de programmation de scripts principalement utlisé dans les pages web interactives mais aussi côté serveur.",
                JScript : "JScript est le nom générique de plusieurs implémentations d'ECMAScript 3 créées par Microsoft.",
                ActionScript : "ActionScript est le langage de programmation utilisé au sein d'applications clientes (Adobe Flash, Adobe Flex) et serveur (Flash media server, Jrun, Macromedia Generator).",
                EX4 : "ECMAScript for XML (EX4) est une extension XML au langage ECMAScript."
            };

            /* définition de la liste de descrition */ 

            var list_description = document.createElement('dl') ;
            for (var id in Liste_definitions){ // On parcourt le dictionnaire avec une boucle for in
                var item_list = document.createElement('dt'); 
                var text_item = document.createTextNode(id) ; // On récupére l'index de dictionnaire qui servira de titre d'item à chaque ligne
                item_list.appendChild(text_item) ;
                
                var def_de_item = document.createElement('dd') ;
                var Txt_def_item = document.createTextNode(Liste_definitions[id]) ;
                def_de_item.appendChild(Txt_def_item) ;       
                item_list.appendChild(def_de_item) ;

                list_description.appendChild(item_list) ;
            }

            /* Ajout des noeuds à TP3 et ajout de TP3 à body */
            TP3.appendChild(para_TP3) ;
            TP3.appendChild(list_description) ;
            document.body.appendChild(TP3) ;



        </script>
        <h2 class="correction">Corrigé :</h2>
        <p class="correction">Le corrigé utilise un tableau différent composé d'objets littéraux qui sera parcouru par une boucle for classique.
            <br />C'est une approche un peu différente de ma proposition où je parcours l'objet littéral avec une boucle for in.</p>
        <script>
            /*Création du conteneur */
            var TP3_correction = document.createElement('div') ;
            TP3_correction.id="correction_TP3";

            /* On place le texte des objets, eux-mêmes placés dans un tableau */
            var Langages_tab = [{t:"JavaScript", d:"JavaScript est un langage de programmation de scripts principalement utlisé dans les pages web interactives mais aussi côté serveur."}, {t:"JScript", d:"JScript est le nom générique de plusieurs implémentations d'ECMAScript 3 créées par Microsoft."},{t:"ActionScript",d:"ActionScript est le langage de programmation utilisé au sein d'applications clientes (Adobe Flash, Adobe Flex) et serveur (Flash media server, Jrun, Macromedia Generator)"},{d:"EX4",t:"ECMAScript for XML (EX4) est une extension XML au langage ECMAScript."}];

            /* On crée le paragraphe */
            var para_correction = document.createElement('p');
            var Txt_para_correction = document.createTextNode("Langages basés sur ECMAScript :");
            para_correction.appendChild(Txt_para_correction) ;

            /* On crée la liste et on boucle pour ajouter chaque composante */
            var DefList = document.createElement('dl'), defTerm, defTermTxt, defDefn, defDefnText;
            for(var i=0, c=Langages_tab.length; i < c; i++){
                defTerm = document.createElement('dt') ;
                defDefn = document.createElement('dd') ;
                defTermTxt = document.createTextNode(Langages_tab[i].t);
                defDefnText = document.createTextNode(Langages_tab[i].d);
                defTerm.appendChild(defTermTxt) ;
                defDefn.appendChild(defDefnText) ;
                DefList.appendChild(defTerm) ;
                DefList.appendChild(defDefn) ;
            }

            /* On insére tout dans TP3_Correction */
            TP3_correction.appendChild(para_correction) ;
            TP3_correction.appendChild(DefList) ;

            /* Puis tout dans le body */
            document.body.appendChild(TP3_correction) ;
        </script>
    </body>
</html>